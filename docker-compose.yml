services: # 아래에서 설정한 컨테이너들을 하나로 묶어줌
  mysql:
    image: mysql:8.0 # docker mysql 이미지 버전
    container_name: spoton-mysql # 컨테이너 이름
    environment: # mysql 환경변수
      MYSQL_ROOT_PASSWORD: 1234 # root 비밀번호
      MYSQL_DATABASE: spoton-backend # mysql database 이름
      TZ: Asia/Seoul # 시간을 서울 기준으로
    ports: # 포트 번호
      - "3307:3306"
    volumes: # 디비 저장소
      - db-data:/var/lib/mysql
    networks: # docker 컨테이너를 연결하고 호스트와 통신할 수 있도록 해줌
      - app-network
    restart: always # 종료되어도 자동으로 재실행

networks:
  app-network:
    driver: bridge
volumes:
  db-data:
